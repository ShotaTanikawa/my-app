# UI仕様（MVP v1 / Next.js）

最終更新日: 2026-02-13
前提: BackendはSpring Boot API（JWT Bearer認証）

## 1. 画面一覧

- UI-001: ログイン画面
- UI-002: ダッシュボード
- UI-003: 商品一覧
- UI-004: 受注一覧
- UI-005: 受注作成
- UI-006: 受注詳細

## 2. ナビゲーション

- サイドメニュー:
  - ダッシュボード
  - 商品
  - 受注
- ヘッダー:
  - ログイン中ユーザー名
  - ロール
  - ログアウト

## 3. 各画面の要件

## 3.1 UI-001 ログイン

表示項目:

- ユーザー名
- パスワード
- ログインボタン

動作:

- 入力した資格情報で `POST /api/auth/login` を実行
- 成功時にダッシュボードへ遷移
- 失敗時にエラーメッセージ表示

補足:

- クライアント側でアクセストークンとRefresh Tokenをセッション保持
- API呼び出し前に有効期限が近い場合は `POST /api/auth/refresh` で更新

## 3.2 UI-002 ダッシュボード

表示項目:

- 商品数
- 受注数
- 低在庫商品数（閾値以下）
- 最近の受注（最新5件）

データ取得:

- `GET /api/products`
- `GET /api/orders`

## 3.3 UI-003 商品一覧

表示項目:

- SKU
- 商品名
- 単価
- 在庫（販売可能）
- 在庫（引当済）
- 操作ボタン（ロールにより出し分け）

操作:

- ADMIN: 商品作成、商品編集
- ADMIN/OPERATOR: 在庫追加
- VIEWER: 参照のみ

API:

- `GET /api/products`
- `POST /api/products`（ADMIN）
- `PUT /api/products/{productId}`（ADMIN）
- `POST /api/products/{productId}/stock`（ADMIN/OPERATOR）

## 3.4 UI-004 受注一覧

表示項目:

- 受注番号
- 顧客名
- ステータス
- 作成日時
- 詳細リンク

API:

- `GET /api/orders`

## 3.5 UI-005 受注作成

表示項目:

- 顧客名入力
- 明細行（商品選択、数量入力）
- 明細追加/削除
- 作成ボタン

バリデーション:

- 顧客名必須
- 明細1件以上
- 数量は1以上

API:

- `POST /api/orders`

## 3.6 UI-006 受注詳細

表示項目:

- 受注ヘッダー情報（番号、顧客、ステータス、日時）
- 明細一覧
- 操作ボタン（確定/キャンセル）

操作制御:

- `RESERVED` のときのみ確定・キャンセルボタン表示
- `CONFIRMED` / `CANCELLED` ではボタン非表示

API:

- `GET /api/orders/{orderId}`
- `POST /api/orders/{orderId}/confirm`
- `POST /api/orders/{orderId}/cancel`

## 4. 権限別UI制御

- ADMIN:
  - 全画面アクセス可
  - 商品作成/編集可
  - 在庫追加可
  - 受注作成/確定/キャンセル可
- OPERATOR:
  - 商品参照可
  - 在庫追加可
  - 受注作成/確定/キャンセル可
- VIEWER:
  - 商品・受注の参照のみ可

## 5. エラーハンドリング方針

- 401: 認証エラー（再ログイン誘導）
- 403: 権限不足（操作不可メッセージ）
- 404: データ未存在
- 409: 在庫不足・状態遷移不正
- 500: 想定外エラー

## 6. 実装優先順

- P1: ログイン、商品一覧、受注一覧
- P2: 商品作成/編集、在庫追加
- P3: 受注作成、受注詳細、確定/キャンセル
- P4: ダッシュボード集計とUX改善
